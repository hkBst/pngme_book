<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Chunk Types - PNGme: An Intermediate Rust Project</title>
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "light" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="introduction.html">Introduction</a></li><li class="chapter-item expanded affix "><a href="setup.html">Setup</a></li><li class="chapter-item expanded "><a href="chapter_1.html" class="active"><strong aria-hidden="true">1.</strong> Chunk Types</a></li><li class="chapter-item expanded "><a href="chapter_2.html"><strong aria-hidden="true">2.</strong> Chunks</a></li><li class="chapter-item expanded "><a href="chapter_3.html"><strong aria-hidden="true">3.</strong> PNG Files</a></li><li class="chapter-item expanded "><a href="chapter_4.html"><strong aria-hidden="true">4.</strong> Command Line Arguments</a></li><li class="chapter-item expanded "><a href="chapter_5.html"><strong aria-hidden="true">5.</strong> Using Your Code to Write More Code</a></li><li class="chapter-item expanded "><a href="chapter_6.html"><strong aria-hidden="true">6.</strong> Next Steps</a></li><li class="chapter-item expanded "><a href="hints.html"><strong aria-hidden="true">7.</strong> Hints</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="hints/chapter_1_hints.html"><strong aria-hidden="true">7.1.</strong> Chapter 1 Hints</a></li><li class="chapter-item expanded "><a href="hints/chapter_2_hints.html"><strong aria-hidden="true">7.2.</strong> Chapter 2 Hints</a></li><li class="chapter-item expanded "><a href="hints/chapter_3_hints.html"><strong aria-hidden="true">7.3.</strong> Chapter 3 Hints</a></li><li class="chapter-item expanded "><a href="hints/chapter_4_hints.html"><strong aria-hidden="true">7.4.</strong> Chapter 4 Hints</a></li><li class="chapter-item expanded "><a href="hints/chapter_5_hints.html"><strong aria-hidden="true">7.5.</strong> Chapter 5 Hints</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">PNGme: An Intermediate Rust Project</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#chapter-1-chunk-types" id="chapter-1-chunk-types">Chapter 1: Chunk Types</a></h1>
<p>Okay here we go!</p>
<p>The next three chapters will have you implement a basic PNG file. PNG files are essentially just a list of &quot;chunks&quot;, each containing their own data. Each chunk has a type that can be represented as a 4 character string. There are standard chunk types for things like image data, but there's no rule that would prevent you from inserting your own chunks with whatever data you want. We can even tell PNG decoders to ignore our chunks depending on how we capitalize our chunk types.</p>
<p>In this chapter, we'll be implementing chunk types. These are pretty easy since they're essentially just 4 alphabetic characters. Your chunk types should always be <strong>valid</strong> chunks. It should not be possible to construct an invalid chunk type using your public interface. The <a href="http://www.libpng.org/pub/png/spec/1.2/PNG-Structure.html">PNG file structure spec</a> will tell what a valid chunk type looks like.</p>
<h3><a class="header" href="#a-little-bit-about-bytes" id="a-little-bit-about-bytes">A little bit about bytes</a></h3>
<p>I keep saying that chunk types are strings, but you'll want to think about them in terms of bytes. If you've never worked directly with bytes before, it's not that scary. If you <em>have</em> worked directly with bytes before, you can skip straight to the <a href="#assignment">Assignment</a> section below.</p>
<p>A bit is a <code>0</code> or a <code>1</code>. A byte is 8 bits. In decimal notation, a byte is a number in the range 0 to 255. You've probably heard that computers only understand 1's and 0's. While that's kinda true, they generally communicate using bytes. In Rust, bytes are represented by the type <code>u8</code>.</p>
<p>Bytes are fun because their meaning is usually open to interpretation. We've already seen that individual bytes can be interpreted as 8 individual bits or as a number from 0 to 255. They can also be interpreted in groups. A 32-bit integer is 4 bytes. Rust even gives you a function to make a <code>u32</code> from 4 bytes using <code>u32::from_be_bytes([1, 2, 3, 4])</code>. A Rust <code>String</code> is just a <code>Vec&lt;u8&gt;</code> whose bytes have been validated as UTF-8. Guess what the &quot;8&quot; in UTF-8 stands for.</p>
<p>Now let's make some chunks.</p>
<h2><a class="header" href="#assignment" id="assignment">Assignment</a></h2>
<p>Using the <a href="http://www.libpng.org/pub/png/spec/1.2/PNG-Structure.html">PNG file structure spec</a>, implement chunk types. Don't worry about implementing any specific chunk types. You only need to store a valid PNG chunk type. You don't have to implement the full chunk object either. We'll do that in the next chapter. This is just the 4 byte chunk type described in section <code>3.3</code> of the link above.</p>
<p>You need to provide methods that return the chunk type in bytes, check the validity of the entire chunk type, and check the special meaning of capitalization for each of the four bytes. Method signatures are provided below.</p>
<p>You will also need to implement a few standard library traits.</p>
<h2><a class="header" href="#requirements" id="requirements">Requirements</a></h2>
<ol>
<li>Copy the unit tests below and paste them at the bottom of your <code>chunk_type.rs</code> file.</li>
<li>Write a <code>ChunkType</code> struct with your implementation of PNG chunk types.</li>
<li>Implement <code>TryFrom&lt;[u8; 4]&gt;</code> for your <code>ChunkType</code>.</li>
<li>Implement <code>FromStr</code> for your <code>ChunkType</code>.</li>
<li>Implement <code>Display</code> for your <code>ChunkType</code>.</li>
<li>Implement or derive <code>PartialEq</code> and <code>Eq</code> for your <code>ChunkType</code></li>
<li>Required methods:
<ol>
<li><code>fn bytes(&amp;self) -&gt; [u8; 4]</code></li>
<li><code>fn is_valid(&amp;self) -&gt; bool</code></li>
<li><code>fn is_critical(&amp;self) -&gt; bool</code></li>
<li><code>fn is_public(&amp;self) -&gt; bool</code></li>
<li><code>fn is_reserved_bit_valid(&amp;self) -&gt; bool</code></li>
<li><code>fn is_safe_to_copy(&amp;self) -&gt; bool</code> </li>
</ol>
</li>
<li>Pass all of the unit tests.</li>
</ol>
<h2><a class="header" href="#unit-tests" id="unit-tests">Unit Tests</a></h2>
<pre><pre class="playpen"><code class="language-rust no_run noplayground">
<span class="boring">#![allow(unused_variables)]
</span><span class="boring">fn main() {
</span>#[cfg(test)]
mod tests {
    use super::*;
    use std::convert::TryFrom;
    use std::str::FromStr;

    #[test]
    pub fn test_chunk_type_from_bytes() {
        let expected = [82, 117, 83, 116];
        let actual = ChunkType::try_from([82, 117, 83, 116]).unwrap();

        assert_eq!(expected, actual.bytes());
    }

    #[test]
    pub fn test_chunk_type_from_str() {
        let expected = ChunkType::try_from([82, 117, 83, 116]).unwrap();
        let actual = ChunkType::from_str(&quot;RuSt&quot;).unwrap();
        assert_eq!(expected, actual);
    }

    #[test]
    pub fn test_chunk_type_is_critical() {
        let chunk = ChunkType::from_str(&quot;RuSt&quot;).unwrap();
        assert!(chunk.is_critical());
    }

    #[test]
    pub fn test_chunk_type_is_not_critical() {
        let chunk = ChunkType::from_str(&quot;ruSt&quot;).unwrap();
        assert!(!chunk.is_critical());
    }

    #[test]
    pub fn test_chunk_type_is_public() {
        let chunk = ChunkType::from_str(&quot;RUSt&quot;).unwrap();
        assert!(chunk.is_public());
    }

    #[test]
    pub fn test_chunk_type_is_not_public() {
        let chunk = ChunkType::from_str(&quot;RuSt&quot;).unwrap();
        assert!(!chunk.is_public());
    }

    #[test]
    pub fn test_chunk_type_is_reserved_bit_valid() {
        let chunk = ChunkType::from_str(&quot;RuSt&quot;).unwrap();
        assert!(chunk.is_reserved_bit_valid());
    }

    #[test]
    pub fn test_chunk_type_is_reserved_bit_invalid() {
        let chunk = ChunkType::from_str(&quot;Rust&quot;).unwrap();
        assert!(!chunk.is_reserved_bit_valid());
    }

    #[test]
    pub fn test_chunk_type_is_safe_to_copy() {
        let chunk = ChunkType::from_str(&quot;RuSt&quot;).unwrap();
        assert!(chunk.is_safe_to_copy());
    }

    #[test]
    pub fn test_chunk_type_is_unsafe_to_copy() {
        let chunk = ChunkType::from_str(&quot;RuST&quot;).unwrap();
        assert!(!chunk.is_safe_to_copy());
    }

    #[test]
    pub fn test_valid_chunk_is_valid() {
        let chunk = ChunkType::from_str(&quot;RuSt&quot;).unwrap();
        assert!(chunk.is_valid());
    }

    #[test]
    pub fn test_invalid_chunk_is_valid() {
        let chunk = ChunkType::from_str(&quot;Rust&quot;).unwrap();
        assert!(!chunk.is_valid());

        let chunk = ChunkType::from_str(&quot;Ru1t&quot;);
        assert!(chunk.is_err());
    }

    #[test]
    pub fn test_chunk_type_string() {
        let chunk = ChunkType::from_str(&quot;RuSt&quot;).unwrap();
        assert_eq!(&amp;chunk.to_string(), &quot;RuSt&quot;);
    }

    #[test]
    pub fn test_chunk_type_trait_impls() {
        let chunk_type_1: ChunkType = TryFrom::try_from([82, 117, 83, 116]).unwrap();
        let chunk_type_2: ChunkType = FromStr::from_str(&quot;RuSt&quot;).unwrap();
        let _chunk_string = format!(&quot;{}&quot;, chunk_type_1);
        let _are_chunks_equal = chunk_type_1 == chunk_type_2;
    }
}
<span class="boring">}
</span></code></pre></pre>
<h2><a class="header" href="#resources" id="resources">Resources</a></h2>
<ul>
<li><a href="http://www.libpng.org/pub/png/spec/1.2/PNG-Contents.html">PNG Spec</a></li>
<li><a href="https://doc.rust-lang.org/std/fmt/trait.Display.html">std::fmt::Display</a></li>
<li><a href="https://doc.rust-lang.org/std/convert/trait.TryFrom.html">std::convert::TryFrom</a></li>
<li><a href="https://doc.rust-lang.org/std/str/trait.FromStr.html">std::str::FromStr</a></li>
<li><a href="https://doc.rust-lang.org/std/str/fn.from_utf8.html">std::str::from_utf8</a></li>
<li><a href="https://doc.rust-lang.org/std/primitive.str.html#method.as_bytes">str::as_bytes</a></li>
<li><a href="https://doc.rust-lang.org/std/primitive.str.html#method.is_ascii">str::is_ascii</a></li>
<li><a href="https://doc.rust-lang.org/std/primitive.u8.html#method.is_ascii_lowercase">u8::is_acsii_lowercase</a></li>
<li><a href="https://doc.rust-lang.org/std/primitive.u8.html#method.is_ascii_uppercase">u8::is_acsii_uppercase</a></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="setup.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="chapter_2.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="setup.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="chapter_2.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        
        
        
        <script type="text/javascript">
            window.playpen_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
